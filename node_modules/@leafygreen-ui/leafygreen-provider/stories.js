import e,{useContext as r,createContext as n,useState as o,useMemo as t,useEffect as a}from"react";import l from"prop-types";import"@leafygreen-ui/lib";import{useEventListener as i}from"@leafygreen-ui/hooks";var u=n({contextDarkMode:!1,setDarkMode:function(){}});function c(r){var n=r.children,o=r.contextDarkMode,t=r.setDarkMode;return e.createElement(u.Provider,{value:{contextDarkMode:o,setDarkMode:t}},n)}function d(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,t,a,l,i=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(o=a.call(n)).done)&&(i.push(o.value),i.length!==r);u=!0);}catch(e){c=!0,t=e}finally{try{if(!u&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw t}}return i}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return p(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,o=new Array(r);n<r;n++)o[n]=e[n];return o}c.displayName="DarkModeProvider",c.propTypes={children:l.node,contextDarkMode:l.bool};var s={popover:{portalContainer:void 0,scrollContainer:void 0}},v=n(s);function f(r){var n=r.popover,o=void 0===n?s.popover:n,t=r.children;return e.createElement(v.Provider,{value:{popover:o}},t)}var y=n(14);function m(r){var n=r.children,o=r.baseFontSize,t=void 0===o?14:o;return e.createElement(y.Provider,{value:t},n)}m.displayName="TypographyProvider",m.propTypes={children:l.node,baseFontSize:l.number};var b={usingKeyboard:!0,setUsingKeyboard:function(){}},h=n(b),g={tab:9,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40};function k(r){var n=r.children,a=d(o(b.usingKeyboard),2),l=a[0],u=a[1];i("mousedown",(function(){return u(!1)}),{enabled:l}),i("keydown",(function(e){var r=e.keyCode;Object.values(g).includes(r)&&u(!0)}),{enabled:!l});var c=t((function(){return{usingKeyboard:l,setUsingKeyboard:u}}),[l]);return e.createElement(h.Provider,{value:c},n)}function M(n){var t=n.children,l=n.baseFontSize,i=n.popoverPortalContainer,p=n.darkMode,s=r(u).contextDarkMode,b=d(o(null!=p?p:s),2),h=b[0],g=b[1];a((function(){g(null!=p?p:s)}),[p,s]);var M=r(y),E=null!=l?l:M,P=r(v).popover,w=null!=i?i:P;return e.createElement(k,null,e.createElement(f,{popover:w},e.createElement(m,{baseFontSize:E},e.createElement(c,{contextDarkMode:h,setDarkMode:g},t))))}k.displayName="UsingKeyboardProvider",k.propTypes={children:l.node},M.displayName="LeafyGreenProvider",M.propTypes={popoverPortalContainer:l.shape({popover:l.shape({portalContainer:l.elementType,scrollContainer:l.elementType})}),baseFontSize:l.oneOf([14,16]),darkMode:l.bool},l.node;var E=function(){return e.createElement("div",null,"This is a test component.")},P={title:"Contexts/LeafyGreenProvider",component:M,parameters:{default:null},argTypes:{darkMode:{control:"boolean"},popoverPortalContainer:{control:"none"}}},w=function(r){return e.createElement(M,r,e.createElement(E,null))}.bind({});w.parameters={chromatic:{disableSnapshot:!0}};export{w as Basic,P as default};
