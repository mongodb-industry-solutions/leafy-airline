import e,{useContext as r,createContext as n,useState as o,useMemo as t,useEffect as a}from"react";import i from"prop-types";import{getTheme as l}from"@leafygreen-ui/lib";import{useEventListener as u}from"@leafygreen-ui/hooks";var d=n({contextDarkMode:!1,setDarkMode:function(){}}),c=function(){return r(d)},p=function(e){var r,n=c(),o=n.contextDarkMode,t=n.setDarkMode,a=null!==(r=null!=e?e:o)&&void 0!==r&&r;return{darkMode:a,theme:l(a),setDarkMode:t}};function s(r){var n=r.children,o=r.contextDarkMode,t=r.setDarkMode;return e.createElement(d.Provider,{value:{contextDarkMode:o,setDarkMode:t}},n)}function v(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,t,a,i,l=[],u=!0,d=!1;try{if(a=(n=n.call(e)).next,0===r){if(Object(n)!==n)return;u=!1}else for(;!(u=(o=a.call(n)).done)&&(l.push(o.value),l.length!==r);u=!0);}catch(e){d=!0,t=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw t}}return l}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return f(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,o=new Array(r);n<r;n++)o[n]=e[n];return o}s.displayName="DarkModeProvider",s.propTypes={children:i.node,contextDarkMode:i.bool};var y={popover:{portalContainer:void 0,scrollContainer:void 0}},m=n(y);function b(){return r(m).popover}function h(r){var n=r.popover,o=void 0===n?y.popover:n,t=r.children;return e.createElement(m.Provider,{value:{popover:o}},t)}var k=n(14);function M(){return r(k)}function P(r){var n=r.children,o=r.baseFontSize,t=void 0===o?14:o;return e.createElement(k.Provider,{value:t},n)}P.displayName="TypographyProvider",P.propTypes={children:i.node,baseFontSize:i.number};var g={usingKeyboard:!0,setUsingKeyboard:function(){}},D=n(g),w={tab:9,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40};function A(){return r(D)}function E(r){var n=r.children,a=v(o(g.usingKeyboard),2),i=a[0],l=a[1];u("mousedown",(function(){return l(!1)}),{enabled:i}),u("keydown",(function(e){var r=e.keyCode;Object.values(w).includes(r)&&l(!0)}),{enabled:!i});var d=t((function(){return{usingKeyboard:i,setUsingKeyboard:l}}),[i]);return e.createElement(D.Provider,{value:d},n)}function O(r){var n=r.children,t=r.baseFontSize,i=r.popoverPortalContainer,l=r.darkMode,u=c().contextDarkMode,d=v(o(null!=l?l:u),2),p=d[0],f=d[1];a((function(){f(null!=l?l:u)}),[l,u]);var y=M(),m=null!=t?t:y,k=b(),g=null!=i?i:k;return e.createElement(E,null,e.createElement(h,{popover:g},e.createElement(P,{baseFontSize:m},e.createElement(s,{contextDarkMode:p,setDarkMode:f},n))))}E.displayName="UsingKeyboardProvider",E.propTypes={children:i.node},O.displayName="LeafyGreenProvider",O.propTypes={popoverPortalContainer:i.shape({popover:i.shape({portalContainer:i.elementType,scrollContainer:i.elementType})}),baseFontSize:i.oneOf([14,16]),darkMode:i.bool};var S=n({isPopoverOpen:!1,setIsPopoverOpen:function(){}});function x(){return r(S)}function T(r){var n=r.children,a=v(o(!1),2),i=a[0],l=a[1],u=t((function(){return{isPopoverOpen:i,setIsPopoverOpen:l}}),[i]);return e.createElement(S.Provider,{value:u},n)}T.displayName="PopoverProvider",T.propTypes={children:i.node};export{S as PopoverContext,T as PopoverProvider,h as PortalContextProvider,O as default,M as useBaseFontSize,p as useDarkMode,c as useDarkModeContext,x as usePopoverContext,b as usePopoverPortalContainer,A as useUsingKeyboardContext};
//# sourceMappingURL=index.js.map
